<template>
  <inertia-head>
    <title>–ö–≤–∞—Ä—Ç–∏—Ä—ã —Å –æ—Ç–∑—ã–≤–∞–º–∏ –ø–æ –∞–¥—Ä–µ—Å—É {{ address }}</title>
    <meta
      name="description"
      :content="metaDescription"
    >
  </inertia-head>

  <address-header
    back-url="/"
    :address="address"
  />

  <div class="relative m-2 mb-3 flex flex-1 flex-col">
    <template v-if="apartments?.data?.length">
      <div
        v-for="ap in apartments.data"
        :key="ap.id"
        class="flex flex-col"
      >
        <apartment-card
          :id="ap.id"
          :number="ap.number"
          :rating="ap.rating"
          :floor="ap.floor"
          :rooms-amount="ap.amountOfRooms"
          :reviews-count="ap.reviewsCount"
        />
      </div>
    </template>

    <div class="ml-4 mt-4 flex">
      <p class="flex before:mr-2 before:block before:h-full before:w-2 before:rounded-full before:bg-blue-400">
        –ï—Å–ª–∏ –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –≤–∞—Å –∫–≤–∞—Ä—Ç–∏—Ä—É –Ω–µ—Ç, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ üòâ
      </p>
    </div>

    <inertia-link
      class="btn-white sticky bottom-2 mt-4 w-11/12 self-center"
      :href="'/create-review?address=' + address"
    >
      –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
    </inertia-link>
  </div>
</template>

<script setup lang="ts">
import ApartmentCard from '@/components/cards/RApartmentCard.vue';
import AddressHeader from '@/shared/components/RAddressHeader.vue';
import type { IApartment } from '@/types/review';
import { computed } from 'vue';

interface Props {
  apartments: {
    data: IApartment[] | [];
  };
  address: string;
}

const props = defineProps<Props>();

const metaDescription = computed(() => {
  return props.apartments?.data?.length
    ? `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–≤–∞—Ä—Ç–∏—Ä —Å –æ—Ç–∑—ã–≤–∞–º–∏ –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É: ${props.apartments?.data?.length}. –¢–∞–∫–∂–µ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π –æ—Ç–∑—ã–≤`
    : '–ö–≤–∞—Ä—Ç–∏—Ä —Å –æ—Ç–∑—ã–≤–∞–º–∏ –ø–æ —ç—Ç–æ–º—É –∞–¥—Ä–µ—Å—É –Ω–µ—Ç, –æ–¥–Ω–∞–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π –æ—Ç–∑—ã–≤';
});
</script>
